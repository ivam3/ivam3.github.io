/**
* VFM Registration js
*/
var delay=function(){var e=0;return function(a,r){clearTimeout(e),e=setTimeout(a,r)}}();function checkUserAvailable(e){var a,r=e.val().replace(/\s+/g,"");e.val(r),e.parent().next(".form-control-feedback").removeClass("glyphicon-minus").removeClass("glyphicon-remove").removeClass("glyphicon-ok").addClass("glyphicon-refresh").addClass("fa-spin"),e.closest(".has-feedback").removeClass("has-error").removeClass("has-success"),delay(function(){r.length>=3?$.ajax({method:"POST",url:"vfm-admin/ajax/usr-check.php",data:{user_name:r}}).done(function(r){a="success"==r?"glyphicon-ok":"glyphicon-remove",e.closest(".has-feedback").addClass("has-"+r),e.parent().next(".form-control-feedback").removeClass("glyphicon-refresh").removeClass("fa-spin").addClass(a)}):(e.closest(".has-feedback").addClass("has-error"),e.parent().next(".form-control-feedback").removeClass("glyphicon-refresh").removeClass("fa-spin").addClass("glyphicon-remove"))},1e3)}function passwordStrength(e,a){var r=e.val(),s=(a=e.data("length"),"danger w1"),t=!0;r.length>=a&&(t=!1,"Weak",s="danger w25");1==/^(?=\S*?[A-Z])(?=\S*?[a-z])(?=\S*?[0-9])(?=\S*?[^\w\*])/.test(r)?("Very Strong",s="success w100"):1==/^(?=\S*?[A-Z])(?=\S*?[a-z])((?=\S*?[0-9])|(?=\S*?[^\w\*]))/.test(r)?("Strong",s="success w75"):1==/^(?=\S*?[a-z])((?=\S*?[0-9])|(?=\S*?[^\w\*])|(?=\S*?[A-Z]))/.test(r)&&("Almost Strong",s="warning w50",barlength=50);var n=e.data("bs.popover");return n.$tip.addClass(n.options.placement).removeClass("danger success info warning primary w1 w5 w10 w25 w30 w50 w70 w75 w100").addClass(s),t}$(document).ready(function(){$("#user_name").on("input",function(){checkUserAvailable($(this))})}),$(document).on("keyup keypress","#regform",function(e){if(13===(e.keyCode||e.which))return e.preventDefault(),!1}),$(document).on("submit","#regform",function(e){$regform=$(this),$regform.data("submitted",!1),e.preventDefault(),$("#regresponse").html("");var a=$("#user_pass").val(),r=$("#user_pass_check").val(),s=!0;if($("#regform input").each(function(){$(this).val()||(s=!1)}),0==s){var t=$("#trans_fill_all").val();return $("#regresponse").html('<div class="alert alert-warning" role="alert">'+t+"</div>"),!1}if($("#agree").length&&!$("#agree").prop("checked")){var n=$("#trans_accept_terms").val();return $("#regresponse").html('<div class="alert alert-warning" role="alert">'+n+"</div>"),!1}if(a!==r){var o=$("#trans_pwd_match").val();return $("#user_pass_check").focus(),$("#regresponse").html('<div class="alert alert-warning" role="alert">'+o+"</div>"),!1}if(a.length<$("#user_pass").data("length"))return $("#user_pass").focus(),!1;$(".mailpreload").fadeIn("fast",function(){if(0==$regform.data("submitted")){$regform.data("submitted",!0);var e=$.now(),a=$regform.serialize();$.ajax({cache:!1,method:"POST",url:"vfm-admin/ajax/usr-reg.php?t="+e,data:a}).done(function(a){$("#regresponse").html(a),$("#captcha").attr("src","vfm-admin/captcha/img.php?"+e),$("#grecaptcha").length&&grecaptcha.reset(),$(".mailpreload").fadeOut("slow",function(){$regform.data("submitted",!1)}),$("#user_pass").val(""),$("#user_pass_check").val("")}).fail(function(){$("#regresponse").html('<div class="alert alert-danger" role="alert">error connecting user-reg.php</div>'),$("#captcha").attr("src","vfm-admin/captcha/img.php?"+e),$("#grecaptcha").length&&grecaptcha.reset(),$(".mailpreload").fadeOut("slow",function(){$regform.data("submitted",!1)})})}})});